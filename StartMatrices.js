/**
 * A convenience function that converts template strings to 2d arrays
 * of 1s and 0s
 *
 * more on template strings / functions:
 * - http://es6-features.org/#RawStringAccess
 * - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals
 */
function gol([str]) {
  return (
    str
      .split('\n')
      .map(l => l.trim()) // remove all whitespace on the ends
      .filter(x => x) // remove any empty lines
      .map(l => {
        return l.split('').map(c => {
          if (c !== '1' && c !== '0') throw new Error('Invalid character in "gol" template');
          return Number(c);
        });
      })
  );
}

function pad(radius, matrix) {
  matrix.forEach(row => {
    for (let i = 0; i < radius; i++) {
      row.unshift(0);
      row.push(0);
    }
  });

  const cols = matrix[0].length;

  for (let i = 0; i < radius; i++) {
    matrix.unshift(new Array(cols).fill(0));
    matrix.push(new Array(cols).fill(0));
  }

  return matrix;
}

const START_MATRICES = {
  EMPTY: [[]],
  SPINNER: pad(5, gol`
    010
    010
    010
  `),
  GLIDER: pad(10, gol`
    0000
    0100
    0011
    0110
  `),
  SHIP: pad(10, gol`
    000100
    010001
    100000
    100001
    111110
    000000
  `),
  STATIONARY: gol`
    000000000000100
    000000000001010
    000000000000100
    000000000000000
    000101100000000
    000110100000000
    000000000000000
    000000000000000
    000000000010000
    000000000101000
    000000000100100
    001100000011000
    001001000000000
    000011000000000
    000000000000000
  `,

  CROSSHAIR: pad(10, gol`
    010
    111
    000
  `),
  BOOM: pad(50, gol`
    011
    110
    010
  `),
  PERIOD_25_OSC: pad(5, gol`
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000001100000000000000000000000000
    000000000000000000000000001100000000000000000000000000
    000000100001000000000000000000000000000000100001000000
    000011011110110000000000000000000000000011011110110000
    000000100001000000000000000000000000000000100001000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000                      
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000010010000000000000000000000000
    000000000000000000000001010010100000000000000000000000
    000000000000000000000000110011000000000000000000000000
    001001000010010000000000000000000000000010010000100100
    111001111110011100000000000000000000001110011111100111
    001001000010010000000000001100000000000010010000100100
    000000000000000000000000001100000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000100000000001000000000000000000000
    000000000000000000000100000000001000000000000000000000
    000000000000000000001010000000010100000000000000000000
    000000000000000000000100000000001000000000000000000000
    000000000000000000000100000000001000000000000000000000
    000000000000000000000100000000001000000000000000000000
    000000000000000000000100000000001000000000000000000000
    000000000000000000001010000000010100000000000000000000
    000000000000000000000100000000001000000000000000000000
    000000000000000000000100000000001000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
    000000000000000000000000000000000000000000000000000000
  `)
};